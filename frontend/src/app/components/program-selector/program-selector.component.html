<app-header></app-header>

<main class="program-selector">
  <div class="hero-section">
    <h1 class="title">AI Digital Enrollment</h1>
    <p class="subtitle">Select a program to begin enrollment</p>
  </div>

  <div class="container">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading">
      <p>Loading programs...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="errorMessage && !isLoading" class="error-container">
      <p class="error-text">{{ errorMessage }}</p>
      <button class="btn-primary" (click)="loadPrograms()">Try Again</button>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && !errorMessage && programs.length === 0" class="empty-state">
      <div class="empty-state-content">
        <div class="empty-icon">ðŸ“‹</div>
        <h2>No Programs Available</h2>
        <p>No programs have been created or enabled yet.</p>
        <p>Please use <a routerLink="/admin/form-builder" class="form-builder-link">Form Builder</a> to create a new program.</p>
      </div>
    </div>

    <!-- Programs Grid -->
    <div *ngIf="!isLoading && !errorMessage && programs.length > 0" class="programs-container">
      <div class="program-card" *ngFor="let program of programs">
        <div class="card-content">
          <div class="logo-container" *ngIf="program.logoUrl">
            <img [src]="program.logoUrl" [alt]="program.displayName" class="program-logo">
          </div>
          <h2 class="program-name">{{ program.displayName }}</h2>
          <p class="manufacturer" *ngIf="program.manufacturer">{{ program.manufacturer }}</p>
          <p class="description" *ngIf="program.shortDescription">{{ program.shortDescription }}</p>
          <div class="card-actions">
            <button class="enroll-button" [style.background-color]="program.primaryButtonColor || program.primaryColor || '#E41F35'"
              (click)="selectProgram(program.programId)">
              Enroll Now â†’
            </button>
            <div class="edit-actions">
              <button class="edit-button" (click)="editProgram(program.programId)">
                Edit
              </button>
              <button class="edit-pdf-button" (click)="editProgramWithPdf(program.programId)">
                Edit PDF
              </button>
              <button class="delete-button" (click)="confirmDelete(program)">
                Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" *ngIf="showDeleteConfirm" (click)="cancelDelete()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2>Delete Program</h2>
    <p>Are you sure you want to delete this program?</p>
    <p class="program-name-confirm" *ngIf="programToDelete">{{ programToDelete.displayName }}</p>
    <div class="modal-actions">
      <button class="btn-cancel" (click)="cancelDelete()">Cancel</button>
      <button class="btn-confirm-delete" (click)="deleteProgram()" [disabled]="isDeleting">
        <span *ngIf="!isDeleting">Confirm Delete</span>
        <span *ngIf="isDeleting">Deleting...</span>
      </button>
    </div>
  </div>
</div>

<app-footer></app-footer>